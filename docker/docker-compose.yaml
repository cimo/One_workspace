version: '3.8'
services:
  php5_container:
    container_name: Php_${PHP5_VERSION}-fpm
    build:
      context: ${PATH_ROOT}
      dockerfile: Dockerfile_php5
      args:
        USER_NAME: ${USER_NAME}
        USER_PASSWORD: ${USER_PASSWORD}
        WWW_USER_NAME: ${WWW_USER_NAME}
        WWW_USER_PASSWORD: ${WWW_USER_PASSWORD}
        WEB_USER_GROUP: ${WEB_USER_GROUP}
        PATH_ROOT: ${PATH_ROOT}
        TIMEZONE: ${TIMEZONE}
        PHP5_VERSION: ${PHP5_VERSION}
        PHP5_PORT_FPM: ${PHP5_PORT_FPM}
        PHP5_PORT_XDEBUG: ${PHP5_PORT_XDEBUG}
        PHP5_PATH_ROOT: ${PHP5_PATH_ROOT}
        PHP5_SSH_GROUP: ${PHP5_SSH_GROUP}
        PHP5_SSH_PORT: ${PHP5_SSH_PORT}
    environment:
      USER_NAME: ${USER_NAME}
      USER_PASSWORD: ${USER_PASSWORD}
      WWW_USER_NAME: ${WWW_USER_NAME}
      WWW_USER_PASSWORD: ${WWW_USER_PASSWORD}
      WEB_USER_GROUP: ${WEB_USER_GROUP}
      PATH_ROOT: ${PATH_ROOT}
      TIMEZONE: ${TIMEZONE}
      PHP5_VERSION: ${PHP5_VERSION}
      PHP5_PORT_FPM: ${PHP5_PORT_FPM}
      PHP5_PORT_XDEBUG: ${PHP5_PORT_XDEBUG}
      PHP5_PATH_ROOT: ${PHP5_PATH_ROOT}
      PHP5_SSH_GROUP: ${PHP5_SSH_GROUP}
      PHP5_SSH_PORT: ${PHP5_SSH_PORT}
    ports:
      - ${PHP5_SSH_PORT}:22
      - ${PHP5_PORT_FPM}:9000
      - ${PHP5_PORT_XDEBUG}:9999
    volumes:
      - ${PATH_ROOT}:/home/${WWW_USER_NAME}/www
    
  php7_container:
    container_name: Php_${PHP7_VERSION}-fpm
    build:
      context: ${PATH_ROOT}
      dockerfile: Dockerfile_php7
      args:
        USER_NAME: ${USER_NAME}
        USER_PASSWORD: ${USER_PASSWORD}
        WWW_USER_NAME: ${WWW_USER_NAME}
        WWW_USER_PASSWORD: ${WWW_USER_PASSWORD}
        WEB_USER_GROUP: ${WEB_USER_GROUP}
        PATH_ROOT: ${PATH_ROOT}
        TIMEZONE: ${TIMEZONE}
        PHP7_VERSION: ${PHP7_VERSION}
        PHP7_PORT_FPM: ${PHP7_PORT_FPM}
        PHP7_PORT_XDEBUG: ${PHP7_PORT_XDEBUG}
        PHP7_PATH_ROOT: ${PHP7_PATH_ROOT}
        PHP7_SSH_GROUP: ${PHP7_SSH_GROUP}
        PHP7_SSH_PORT: ${PHP7_SSH_PORT}
    environment:
      USER_NAME: ${USER_NAME}
      USER_PASSWORD: ${USER_PASSWORD}
      WWW_USER_NAME: ${WWW_USER_NAME}
      WWW_USER_PASSWORD: ${WWW_USER_PASSWORD}
      WEB_USER_GROUP: ${WEB_USER_GROUP}
      PATH_ROOT: ${PATH_ROOT}
      TIMEZONE: ${TIMEZONE}
      PHP7_VERSION: ${PHP7_VERSION}
      PHP7_PORT_FPM: ${PHP7_PORT_FPM}
      PHP7_PORT_XDEBUG: ${PHP7_PORT_XDEBUG}
      PHP7_PATH_ROOT: ${PHP7_PATH_ROOT}
      PHP7_SSH_GROUP: ${PHP7_SSH_GROUP}
      PHP7_SSH_PORT: ${PHP7_SSH_PORT}
    ports:
      - ${PHP7_SSH_PORT}:22
      - ${PHP7_PORT_FPM}:9000
      - ${PHP7_PORT_XDEBUG}:9999
    volumes:
      - ${PATH_ROOT}:/home/${WWW_USER_NAME}/www
  apache_container:
    container_name: Apache_${APACHE_VERSION}
    build:
      context: ${PATH_ROOT}
      dockerfile: Dockerfile_apache
      args:
        WWW_USER_NAME: ${WWW_USER_NAME}
        WWW_USER_PASSWORD: ${WWW_USER_PASSWORD}
        WEB_USER_GROUP: ${WEB_USER_GROUP}
        PATH_ROOT: ${PATH_ROOT}
        TIMEZONE: ${TIMEZONE}
        APACHE_VERSION: ${APACHE_VERSION}
        APACHE_PORT_HTTP: ${APACHE_PORT_HTTP}
        APACHE_PORT_HTTPS: ${APACHE_PORT_HTTPS}
        APACHE_PATH_ROOT: ${APACHE_PATH_ROOT}
        PHP5_PORT_FPM: ${PHP5_PORT_FPM}
        PHP7_PORT_FPM: ${PHP7_PORT_FPM}
    environment:
      WWW_USER_NAME: ${WWW_USER_NAME}
      WWW_USER_PASSWORD: ${WWW_USER_PASSWORD}
      WEB_USER_GROUP: ${WEB_USER_GROUP}
      PATH_ROOT: ${PATH_ROOT}
      TIMEZONE: ${TIMEZONE}
      APACHE_VERSION: ${APACHE_VERSION}
      APACHE_PORT_HTTP: ${APACHE_PORT_HTTP}
      APACHE_PORT_HTTPS: ${APACHE_PORT_HTTPS}
      APACHE_PATH_ROOT: ${APACHE_PATH_ROOT}
      PHP5_PORT_FPM: ${PHP5_PORT_FPM}
      PHP7_PORT_FPM: ${PHP7_PORT_FPM}
    ports:
      - ${APACHE_PORT_HTTP}:80
      - ${APACHE_PORT_HTTPS}:443
    volumes:
      - ${PATH_ROOT}:/home/${WWW_USER_NAME}/www
      - ${PATH_ROOT}:${APACHE_PATH_ROOT}/htdocs
    depends_on:
      - php5_container
      - php7_container
  mysql_container:
    container_name: MySql_${MYSQL_VERSION}
    build:
      context: ${PATH_ROOT}
      dockerfile: Dockerfile_mysql
      args:
        WWW_USER_NAME: ${WWW_USER_NAME}
        WWW_USER_PASSWORD: ${WWW_USER_PASSWORD}
        WEB_USER_GROUP: ${WEB_USER_GROUP}
        PATH_ROOT: ${PATH_ROOT}
        TIMEZONE: ${TIMEZONE}
        MYSQL_VERSION: ${MYSQL_VERSION}
        MYSQL_PORT: ${MYSQL_PORT}
        MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
        MYSQL_USER: ${MYSQL_USER}
        MYSQL_PASSWORD: ${MYSQL_PASSWORD}
    environment:
      WWW_USER_NAME: ${WWW_USER_NAME}
      WWW_USER_PASSWORD: ${WWW_USER_PASSWORD}
      WEB_USER_GROUP: ${WEB_USER_GROUP}
      PATH_ROOT: ${PATH_ROOT}
      TIMEZONE: ${TIMEZONE}
      MYSQL_VERSION: ${MYSQL_VERSION}
      MYSQL_PORT: ${MYSQL_PORT}
      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
      MYSQL_USER: ${MYSQL_USER}
      MYSQL_PASSWORD: ${MYSQL_PASSWORD}
    ports:
      - ${MYSQL_PORT}:3306
    volumes:
      - ${PATH_ROOT}:/home/${WWW_USER_NAME}/www
    depends_on:
      - apache_container
  postgresql_container:
    container_name: PostgreSql_${POSTGRES_VERSION}
    build:
      context: ${PATH_ROOT}
      dockerfile: Dockerfile_postgresql
      args:
        WWW_USER_NAME: ${WWW_USER_NAME}
        WWW_USER_PASSWORD: ${WWW_USER_PASSWORD}
        WEB_USER_GROUP: ${WEB_USER_GROUP}
        PATH_ROOT: ${PATH_ROOT}
        TIMEZONE: ${TIMEZONE}
        POSTGRES_VERSION: ${POSTGRES_VERSION}
        POSTGRES_PORT: ${POSTGRES_PORT}
        POSTGRES_USER: ${POSTGRES_USER}
        POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
    environment:
      WWW_USER_NAME: ${WWW_USER_NAME}
      WWW_USER_PASSWORD: ${WWW_USER_PASSWORD}
      WEB_USER_GROUP: ${WEB_USER_GROUP}
      PATH_ROOT: ${PATH_ROOT}
      TIMEZONE: ${TIMEZONE}
      POSTGRES_VERSION: ${POSTGRES_VERSION}
      POSTGRES_PORT: ${POSTGRES_PORT}
      POSTGRES_USER: ${POSTGRES_USER}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
    ports:
      - ${POSTGRES_PORT}:5432
    volumes:
      - ${PATH_ROOT}:/home/${WWW_USER_NAME}/www
    depends_on:
      - apache_container
  nodejs_container:
    container_name: NodeJs_${NODEJS_VERSION}
    build:
      context: ${PATH_ROOT}
      dockerfile: Dockerfile_nodejs
      args:
        PATH_ROOT: ${PATH_ROOT}
        TIMEZONE: ${TIMEZONE}
        NODEJS_VERSION: ${NODEJS_VERSION}
        NODEJS_PORT_HTTP: ${NODEJS_PORT_HTTP}
        NODEJS_PORT_HTTPS: ${NODEJS_PORT_HTTPS}
        NODEJS_PORT_VUE: ${NODEJS_PORT_VUE}
        NODEJS_PORT_VUE_APP: ${NODEJS_PORT_VUE_APP}
        NODEJS_PATH_ROOT: ${NODEJS_PATH_ROOT}
        NODEJS_PATH_SERVER: ${NODEJS_PATH_SERVER}
    environment:
        PATH_ROOT: ${PATH_ROOT}
        TIMEZONE: ${TIMEZONE}
        NODEJS_VERSION: ${NODEJS_VERSION}
        NODEJS_PORT_HTTP: ${NODEJS_PORT_HTTP}
        NODEJS_PORT_HTTPS: ${NODEJS_PORT_HTTPS}
        NODEJS_PORT_VUE: ${NODEJS_PORT_VUE}
        NODEJS_PORT_VUE_APP: ${NODEJS_PORT_VUE_APP}
        NODEJS_PATH_ROOT: ${NODEJS_PATH_ROOT}
        NODEJS_PATH_SERVER: ${NODEJS_PATH_SERVER}
    ports:
      - ${NODEJS_PORT_HTTP}:1080
      - ${NODEJS_PORT_HTTPS}:1443
      - ${NODEJS_PORT_VUE}:8000
      - ${NODEJS_PORT_VUE_APP}:8080
    volumes:
      - ${PATH_ROOT}:${NODEJS_PATH_ROOT}